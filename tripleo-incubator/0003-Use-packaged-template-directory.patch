From 93f737573171eaffa88f4f1f48fd322fa54e0901 Mon Sep 17 00:00:00 2001
From: James Slagle <jslagle@redhat.com>
Date: Wed, 19 Mar 2014 07:09:41 -0400
Subject: [PATCH] Use packaged template directory

---
 scripts/configure-vm  | 2 +-
 scripts/setup-network | 6 ++++--
 2 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/scripts/configure-vm b/scripts/configure-vm
index 458507f..afbffd8 100755
--- a/scripts/configure-vm
+++ b/scripts/configure-vm
@@ -5,7 +5,7 @@ import os.path
 
 import libvirt
 
-templatedir = os.path.dirname(os.path.dirname(__file__)) + '/templates'
+templatedir="/usr/share/tripleo/templates"
 
 def main():
     parser = argparse.ArgumentParser(
diff --git a/scripts/setup-network b/scripts/setup-network
index 1d7c228..0e12482 100755
--- a/scripts/setup-network
+++ b/scripts/setup-network
@@ -1,5 +1,7 @@
 #!/bin/bash
-set -eu
+set -eux
+
+template_dir="/usr/share/tripleo/templates"
 
 BASE=$(dirname $0)/../
 BRIDGE_SUFFIX=${1:-''}
@@ -12,7 +14,7 @@ BRIDGE_NAME=brbm$BRIDGE_SUFFIX
 (virsh net-list --persistent | grep "${BRIDGE_NAME} ") && virsh net-destroy ${BRIDGE_NAME}
 (virsh net-list --inactive --persistent | grep "${BRIDGE_NAME} ") && virsh net-undefine ${BRIDGE_NAME}
 
-virsh net-define <(sed s/brbm/$BRIDGE_NAME/ $BASE/templates/brbm.xml)
+virsh net-define <(sed s/brbm/$BRIDGE_NAME/ $template_dir/brbm.xml)
 virsh net-autostart ${BRIDGE_NAME}
 virsh net-start ${BRIDGE_NAME}
 
-- 
1.8.5.3

